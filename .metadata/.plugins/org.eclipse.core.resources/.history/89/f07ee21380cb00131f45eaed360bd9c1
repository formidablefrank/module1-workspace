package com.example.edemo.service;

import java.math.BigDecimal;

public class BankAccountServiceImpl implements BankAccountService {

	@Override
	public void transferFunds(String sourceAccountNumber,
			String targetAccountNumber, BigDecimal amountToTransfer) {
		//check if first account exists (fetch it)
		BankAccount sourceAccount = bankAccountDao.findAccount(sourceAccountNumber);
		//check if second account exists (fetch it)
		BankAccount targetAccount = bankAccountDao.findAccount(targetAccountNumber);
		//check if there is enough balance
		
		//transfer funds
		BigDecimal sourceBalance = sourceAccount.getBalance();
		BigDecimal targetBalance = targetAccount.getBalance();
		sourceAccount.setBalance(sourceBalance.subtract(amountToTransfer));
		targetAccount.setBalance(sourceBalance.add(amountToTransfer));
		//update first account
		bankAccountDao.updateAccount(sourceAccount);
		//update second account
		bankAccountDao.updateAccount(targetAccount);
	}

}
